<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png" />
    <link rel="stylesheet" href="style.css" />

    <title>Intro sign up form</title>
  </head>

  <body>
    <main>
      <section class="text-section">
        <h1>Learn to code by watching others</h1>
        <p>
          See how experienced developers solve problems in real-time. Watching
          scripted tutorials is great, but understanding how developers think is
          invaluable.
        </p>
      </section>

      <section class="form-section">
        <div class="special-price">
          <p>
            <span class="special-price-accent">Try it free 7 days</span> then
            $20/mo. thereafter
          </p>
        </div>

        <div class="form-card">
          <form onsubmit="handleSubmit(event)">
            <input type="text" id="first-name" placeholder="First Name" />
            <span id="validation-text-fn"></span>
            <input type="text" id="last-name" placeholder="Last Name" />
            <span id="validation-text-ln"></span>
            <input type="text" id="email" placeholder="Email Address" />
            <span id="validation-text-email"></span>
            <input type="text" id="password" placeholder="Password" />
            <span id="validation-text-pw"></span>
            <button type="submit">Claim your free trial</button>
          </form>

          <p class="agree">
            By clicking the button, you are agreeing to our
            <a href="#">Terms and Services</a>
          </p>
        </div>
      </section>
    </main>
    <script>
      function handleSubmit(event) {
        event.preventDefault();

        let form = document.querySelector("form");

        let allInputs = document.querySelectorAll("input");
        let allValidationTexts = form.querySelectorAll("span");

        let firstName = document.getElementById("first-name");
        let fnValidation = document.getElementById("validation-text-fn");

        let lastName = document.getElementById("last-name");
        let lastNameValidation = document.getElementById("validation-text-ln");

        let emailInput = document.getElementById("email");
        let emailValidation = document.getElementById("validation-text-email");

        let password = document.getElementById("password");
        let passwordValidation = document.getElementById("validation-text-pw");

        console.log(allInputs);

        if (
          firstName &&
          lastName &&
          isValidEmail(emailInput.value) &&
          password
        ) {
          for (let i = 0; i < allInputs.length; i++) {
            allInputs[i].classList.add("success");
          }
          for (let j = 0; j < allValidationTexts.length; j++) {
            allValidationTexts[j].style.color = "hsl(154, 59%, 51%)";
          }
          fnValidation.innerHTML = "Name submitted";
          lastNameValidation.innerHTML = "Last name submitted";
          emailValidation.innerHTML = "Email submitted!";
          passwordValidation.innerHTML = "Password submitted";
        } else {
          for (let i = 0; i < allInputs.length; i++) {
            allInputs[i].classList.add("error");
          }

          for (let j = 0; j < allValidationTexts.length; j++) {
            allValidationTexts[j].style.color = "hsl(0, 100%, 74%))";
          }

          fnValidation.innerHTML = "First Name cannot be empty";
          lastNameValidation.innerHTML = "Last Name cannot be empty";
          emailValidation.innerHTML = "Looks like this not an email";
          passwordValidation.innerHTML = "Password cannot be empty";
        }

        function isValidEmail(email) {
          var re = /\S+@\S+\.\S+/;
          return re.test(email);
        }
      }
    </script>
  </body>
</html>
